<!DOCTYPE html>
<html>
	<head>

		<title>Crono â€” programming in the future</title>

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="description" content="Programming in the future">
		<meta name="keywords" content="cron, crontab, cron job, cronjob, cron expression, cron as a service, cron-as-as-service, cron jobs, cron job syntax, cron job linux, cron job example, scheduled tasks">

		<link rel="shortcut icon" type="image/png" href="/static/crystal-ball-3.png">
		<link rel="stylesheet" type="text/css" href="/static/reset.css">
		<link rel="stylesheet" type="text/css" href="/static/index.css">
		<link rel="stylesheet" type="text/css" href="/static/hljs.css">

		<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
		<script type="text/javascript">
			window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","resetIdentity","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
			heap.load("{{ heap_analytics_id }}");
			hljs.initHighlightingOnLoad();
		</script>

	</head>
		<body>

			<div class="header">
				<img src="/static/crystal-ball-3.png" class="icon">
				<h1>Crono</h1>
				<div class="sub">Programming in the future</div>
				<!-- <div class="sub"><code>scheduler.run('method').every(hours=1)</code></div> -->
			</div>

			<ol class="menu">
				<li><a href="#getting-started">Getting Started</a></li>
				<li><a href="#triggers">Triggers</a></li>
				<li><a href="#tasks">Tasks</a></li>
				<li><a href="#api">API</a></li>
				<li><a href="#advanced">Advanced</a></li>
				<li><a href="#authentication">Authentication</a></li>
				<li><a href="#errors">Errors</a></li>
				<li><a href="#todo">TODO</a></li>
				<li><a href="#pricing">Pricing</a></li>
				<li><a href="#support">Support</a></li>
			</ol>

			<a name="getting-started"></a>
			<h2>Getting Started</h2>

<p>1. Install the Crono Python client:</p>
<pre><code class="p bash">pip install crono-python</code></pre>

<p>2. Schedule recurring or single occurence jobs in your application (in <code>app.py</code> for example):</p>
<pre><code class="p python">import crono

scheduler = crono<span class="br"> \
  </span>.Scheduler(token='{token}')

# Timer
scheduler<span class="br"> \
  </span>.<a href="#tasks">request</a>('{url}')<span class="br"> \
  </span>.<a href="#triggers-timer" class="hljs-keyword-in">in</a>(minutes=1)

# Datetime
scheduler<span class="br"> \
  </span>.<a href="#tasks">text</a>('Hello, Future!', <span class="br">
    </span><span class="hljs-keyword-from">from</span>='{phone}', <span class="br">
    </span>to='{phone}')<span class="br"> \
  </span>.<a href="#triggers-datetime">on</a>(&lt;datetime&gt;)

# Interval
scheduler<span class="br"> \
  </span>.<a href="#tasks">email</a>('Hello, Future!', <span class="br">
    </span><span class="hljs-keyword-from">from</span>='{email}', <span class="br">
    </span>to='{email}')<span class="br"> \
  </span>.<a href="#triggers-interval">every</a>(hours=1)

# Cron
scheduler<span class="br"> \
  </span>.<a href="#tasks">run</a>('hello_future', <span class="br">
    </span>args=[], <span class="br">
    </span>kwargs={})<span class="br"> \
  </span>.<a href="#triggers-cron">at</a>('0 6 * * 2')

# Decorator
@scheduler.<a href="#triggers">every</a>(days=1)
def hello_future(args, **kwargs):
  print('Hello, Future!')
</code></pre>

<p>3. <em>(Optional)</em> Run the Crono server if you use the <code>run</code> task as it requires to call back your application:</p>
<pre><code class="p bash">crono app:scheduler</code></pre>

			<a name="triggers"></a>
			<h2>Triggers</h2>

			<p class="no-bp">A trigger defines <em>when</em> a job will be executed. There are 4 types of triggers:</p>
			<ul>
				<li><a href="#triggers-timer">Timer</a></li>
				<li><a href="#triggers-datetime">Datetime</a></li>
				<li><a href="#triggers-interval">Interval</a></li>
				<li><a href="#triggers-cron">Cron</a></li>
			</ul>

			<a name="triggers-timer"></a>
			<p class="tpp"><b>Timer</b> specifies a countdown until the execution of a task. It will only occur once. It is instantiated in the Python client by calling the method <code>in</code> on the Scheduler object. It takes at least 1 keyword argument, <code>hours</code> and/or <code>minutes</code>, of type <code>&lt;int&gt;</code>. Those keywords arguments are cumulative (same for the interval type). For example, <code>hours=1, minutes=30</code> results in <code>minutes=90</code>.</p>

Python client:
<pre class="bp"><code class="python">scheduler<span class="br"> \
  </span>.<b class="hljs-keyword-in">in</b>(minutes=30)<span class="br"> \
  </span>.<span class="quiet">&hellip;</span></code></pre>

Request body:
<pre><code class="json">{
  "trigger": {
    "type": "timer",
    "minutes": 30
  }
}</code></pre>

			<a name="triggers-datetime"></a>
			<p class="tpp"><b>Datetime</b> specifies the execution of a task at a specific date and time. It will only occur once. It is instantiated in the Python client by calling the method <code>on</code> on the Scheduler object. It takes 1 positional argument of type <code>&lt;datetime.datetime&gt;</code>.</p>

Python client:
<pre class="bp"><code class="python">import datetime
day = datetime<span class="br"> \
  </span>.datetime(2019, 7, 4)
scheduler<span class="br"> \
  </span>.<b>on</b>(day)<span class="br"> \
  </span>.<span class="quiet">&hellip;</span></code></pre>

Request body:
<pre><code class="json">{
  "trigger": {
    "type": "datetime",
    "iso": "2019-07-04T00:00:00"
  }
}</code></pre>

			<a name="triggers-interval"></a>
			<p class="tpp"><b>Interval</b> specifies a frequency at which to execute a task. It will occur multiple times. It is instantiated in the Python client by calling the method <code>every</code> on the Scheduler object. It takes at least 1 keyword argument, <code>hours</code> and/or <code>minutes</code>, of type <code>&lt;int&gt;</code>. Those keywords arguments are cumulative (similarly to the timer type). For example, <code>hours=1, minutes=30</code> results in <code>minutes=90</code>.</p>

Python client:
<pre class="bp"><code class="python">scheduler.<b>every</b>(hours=1, minutes=30).<span class="quiet">&hellip;</span></code></pre>

Request body:
<pre><code class="json">{
  "trigger": {
    "type": "interval",
    "minutes": 90
  }
}</code></pre>

			<a name="triggers-cron"></a>
			<p class="tpp"><b>Cron</b> uses an expression to specify the execution time. It will occur mutiple times. It is instantiated in the Python client by calling the method <code>at</code> on the Scheduler object. It takes exactly 1 positional argument of type <code>&lt;str&gt;</code>.</p>

Python client:
<pre class="bp"><code class="python">scheduler.<b>at</b>('0 6 * * 2').<span class="quiet">&hellip;</span></code></pre>

Request body:
<pre><code class="json">{
  "trigger": {
    "type": "cron",
    "expression": "0 6 * * 2"
  }
}</code></pre>

			<a name="tasks"></a>
			<h2>Tasks</h2>

			<p class="no-bp">A task defines <em>what</em> a job will do. There are 4 types of tasks:</p>
			<ul>
				<li><a href="#tasks-request">request</a></li>
				<li><a href="#tasks-text">text</a></li>
				<li><a href="#tasks-email">email</a></li>
				<li><a href="#tasks-run">run</a></li>
			</ul>

			<a name="tasks-request"></a>
			<p class="tpp"><code>request</code> sends an HTTP request. It is powered by the <a href="http://docs.python-requests.org/en/master/">Requests</a> library.</p>

Python client:
<pre class="bp"><code class="python">scheduler.<b>request</b>(method='GET|POST&hellip;', <span class="br">
  </span>url='{url}', <span class="br">
  </span>params=&lt;dict|list(tuple)|byte&gt;, <span class="br">
  </span>data=&lt;dict|list(tuple)|byte|file&gt;, <span class="br">
  </span>json=&lt;dict&gt;, <span class="br">
  </span>headers=&lt;dict&gt;, <span class="br">
  </span>cookies=&lt;dict&gt;, <span class="br">
  </span>files=&lt;dict&gt;, <span class="br">
  </span>auth=&lt;tuple&gt;, <span class="br">
  </span>timeout=&lt;float|tuple&gt;, <span class="br">
  </span>allow_redirects=&lt;bool&gt;)<span class="br">
  </span>proxy=&lt;dict&gt;, <span class="br">
  </span>verify=&lt;bool|str&gt;, <span class="br">
  </span>stream=&lt;bool&gt;, <span class="br">
  </span>cert=&lt;str|tuple&gt;)<span class="br"> \
  </span>.<span class="quiet">&hellip;</span>
</code></pre>

Request body:
<pre><code class="json">{
  "task": {
    "type": "request",
    "method": "GET|POST&hellip;",
    "url": "https://gduverger.com/"
    <span class="quiet">&hellip;</span>
  }
}</code></pre>

			<a name="tasks-text"></a>
			<p><code>text</code> sends an SMS. It is powered by <a href="https://www.twilio.com/">Twilio</a>. To use it, you have to specify <code>twilio_account_sid</code> and <code>twilio_auth_id</code> when you instantiate the Scheduler object.</p>

<pre><code class="python">scheduler = crono<span class="br"> \
  </span>.Scheduler(token='{token}', <span class="br">
    </span><b>twilio_account_sid</b>='{sid}', <span class="br">
    </span><b>twilio_auth_id</b>='{id}')
</code></pre>

			<a name="tasks-email"></a>
			<p><code>email</code> sends an email. It is powered by <a href="https://postmarkapp.com/">Postmark</a>. To use it, you have to specify <code>postmark_api_key</code> and <code>postmark_sender</code> when you instantiate the Scheduler object.</p>

<pre><code class="python">scheduler = crono<span class="br"> \
  </span>.Scheduler(token='{token}', <span class="br">
    </span><b>postmark_api_key</b>='{key}', <span class="br">
    </span><b>postmark_sender</b>='{email}')
</code></pre>

			<a name="tasks-run"></a>
			<p><code>run</code> calls a method in your application.</p>

			<a name="api"></a>
			<h2>API</h2>

			<p>Endpoints live under the URL <a href="{{ crono_api_url }}">{{ crono_api_url }}</a> and generally follow the REST architecture. All requests must be encoded as JSON with the <code>Content-Type: application/json</code> header.</p>

			<p class="no-bp">There are 5 endpoints available:</p>
			<ul>
				<li><a href="#api-get-user">GET {{ reverse_url('get_user') }}</a></li>
				<li><a href="#api-get-jobs">GET {{ reverse_url('get_jobs') }}</a></li>
				<li><a href="#api-post-job">POST {{ reverse_url('post_job') }}</a></li>
				<li><a href="#api-get-job">GET {{ reverse_url('get_job', key='key') }}</a></li>
				<li><a href="#api-delete-job">DELETE {{ reverse_url('delete_job', key='key') }}</a></li>
			</ul>

<a name="api-post-job"></a>
<!-- <code>POST {{ reverse_url('post_job') }}</code> -->
<pre class="tpp"><code class="http">POST {{ reverse_url('post_job') }} HTTP/1.1
Host: {{ crono_api_url }}
Content-Type: application/json; charset=utf-8
Authorization: Bearer {token}

{
  "trigger": {
    "type": "cron",
    "expression": "0 6 * * 2"
  },
  "task": {
    "type": "request",
    "method": "GET",
    "url": "https://www.crono.com/"
  }
}</code></pre>

			<a name="advanced"></a>
			<h2>Advanced</h2>

			<p>Methods in the Python client are <b>commutative</b>, meaning the trigger can come before or after the task.</p>

<pre><code class="python">scheduler<span class="br"> \
  </span>.<b>request</b>('{url}')<span class="br"> \
  </span>.<b class="hljs-keyword-in">in</b>(minutes=1)
# is equivalent to&hellip;
scheduler<span class="br"> \
  </span>.<b class="hljs-keyword-in">in</b>(minutes=1)<span class="br"> \
  </span>.<b>request</b>('{url}')
</code></pre>

			<p class="todo">TODO: name/unique</p>

			<a name="authentication"></a>
			<h2>Authentication</h2>

			<p>Requests to the Crono API must provide an API token through the <code>Authorization</code> header. To request a token, email <a href="mailto:{{ crono_support_email }}">{{ crono_support_email }}</a>.</p>

			Python client:
<pre class="bp"><code class="python">scheduler = crono<span class="br"> \
  </span>.Scheduler(token='{token}')
</code></pre>

			Request header:
<pre><code class="http">Authorization: Bearer {token}</code></pre>

			<a name="errors"></a>
			<h2>Errors</h2>

			<p><code>MissingTrigger</code></p>
			<p><code>InvalidTriggerType</code></p>
			<p><code>InvalidTriggerParameters</code></p>
			<p><code>MissingTask</code></p>
			<p><code>InvalidTaskType</code></p>
			<p><code>InvalidTaskParameters</code></p>
			<p><code>MissingToken</code></p>
			<p><code>InvalidToken</code></p>
			<p><code>InsufficientBalance</code></p>

			<a name="todo"></a>
			<h2>TODO</h2>

			<p class="no-bp">Crono is always improving. Here are some of the features coming soon:</p>
			<ul>
				<li>Execution log</li>
				<li>Error notification</li>
				<li class="quiet">&hellip;</li>
			</ul>

			<a name="pricing"></a>
			<h2>Pricing</h2>

			<p>Crono costs $0.001/execution and your first 100 executions are free (no payment information required).

			<a name="support"></a>
			<h2>Support</h2>

			<p>Email <a href="mailto:crono@gduverger.com">crono@gduverger.com</a> for help.</p>

		</body>
</html>
